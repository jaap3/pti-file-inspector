<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0A0A0A">
  <title>.pti file inspector</title>
  <link href="./css/sanitize.css" rel="stylesheet">
  <link href="./css/style.css" rel="stylesheet">
  <script src="js/main.js" type="module"></script>
  <link rel="modulepreload" href="js/components/FileSelect.js">
  <link rel="modulepreload" href="js/modules/ptiTools.js">
  <link rel="modulepreload" href="js/modules/constants.js">
</head>
<body>
  <main class="container">
    <h1 class="sr-only">Polyend Tracker Instrument (.pti) editor</h1>

    <section id="toolbar" role="toolbar" hidden></section>

    <section id="loader">
      <h2 class="sr-only">Load file</h2>
      <label for="pti-file-input">
        Choose/Drop
        a&nbsp;Polyend&nbsp;Tracker instrument&nbsp;<small>(<code>.pti</code>)</small>
        or&nbsp;audio file <small>(<code>.wav</code>,&nbsp;<code>.mp3</code>,&nbsp;<code>.flac</code>, etc.)</small>
        <input id="pti-file-input" type="file" accept=".pti, audio/*" disabled>
      </label>
    </section>

    <section id="pti-instrument-display" hidden></section>
    <section id="pti-instrument-data" hidden></section>
    <section id="pti-instrument-editor" hidden></section>
    <section id="pti-instrument-preview" hidden></section>

  </main>

  <template id="template:instrument-preview">
    <h2 class="sr-only">Preview instrument audio</h2>
    <audio></audio>
    <div class="keypad-container">
      <div class="keypad">
        <button type="button"></button>
      </div>
    </div>
    <div class="controls">
      <button type="button" class="play" title="Play/stop sample">
        <span>Play</span>
        <span hidden>Stop</span>
      </button>
    </div>
    </div>
  </template>

  <template id="template:instrument-display">
    <h2 class="sr-only">Visualize instrument (waveform, region, markers)</h2>
    <canvas class="waveform" height="150" width="300" title="Waveform"></canvas>
  </template>

  <template id="template:toolbar">
    <h2 class="sr-only">Toolbar</h2>
    <div class="controls">
      <button type="button" class="load" title="Load instrument or audio file">
        <span>Load</span>
        <span hidden>Cancel</span>
      </button>
      <button type="button" class="instrument" title="View/Edit instrument parameters">
        <span>Edit params</span>
        <span hidden>Show params</span>
      </button>
      <button type="button" class="export-pti" title="Download instrument as .pti file">Export .pti</button>
      <button type="button" class="export-wav" title="Download sample as .wav file">Export .wav</button>
    </div>
  </template>

  <template id="template:instrument-data-table">
    <h2 class="sr-only">View instrument parameters</h2>
    <table>
      <tr>
        <th></th>
        <td></td>
      </tr>
    </table>
  </template>

  <template id="template:instrument-editor">
    <h2 class="sr-only">Edit instrument parameters</h2>
    <form>
      <fieldset>
        <legend>Instrument parameters</legend>
        <div class="row">
          <label for="pti-instrument-name">Name</label>
          <input type="text" id="pti-instrument-name" name="name" maxlength="31" pattern="[x00-x7F]+">
        </div>
        <div class="row">
          <label for="pti-instrument-volume">Volume</label>
          <input type="range" id="pti-instrument-volume" name="volume" min="0" max="100">
          <output name="volume-result" for="pti-instrument-volume"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-panning">Panning</label>
          <input type="range" id="pti-instrument-panning" name="panning" min="0" max="100">
          <output name="panning-result" for="pti-instrument-panning"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-tune">Tune</label>
          <input type="range" id="pti-instrument-tune" name="tune" min="-24" max="24">
          <output name="tune-result" for="pti-instrument-tune"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-finetune">Finetune</label>
          <input type="range" id="pti-instrument-finetune" name="finetune" min="-100" max="100">
          <output name="finetune-result" for="pti-instrument-finetune"></output>
        </div>
      </fieldset>
      <fieldset>
        <legend>Playback</legend>
        <div class="row">
          <label for="pti-instrument-playback">Playback</label>
          <select id="pti-instrument-playback" name="samplePlayback"></select>
        </div>
        <div class="row">
          <label for="pti-instrument-playbackStart">Start</label>
          <input type="range" id="pti-instrument-playbackStart" name="playbackStart" min="0" max="65535">
          <output name="playbackStart-result" for="pti-instrument-playbackStart"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-loopStart">Loop start</label>
          <input type="range" id="pti-instrument-loopStart" name="loopStart" min="1" max="65534">
          <output name="loopStart-result" for="pti-instrument-loopStart"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-loopEnd">Loop end</label>
          <input type="range" id="pti-instrument-loopEnd" name="loopEnd" min="1" max="65534">
          <output name="loopEnd-result" for="pti-instrument-loopEnd"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-playbackEnd">End</label>
          <input type="range" id="pti-instrument-playbackEnd" name="playbackEnd" min="0" max="65535">
          <output name="playbackEnd-result" for="pti-instrument-playbackEnd"></output>
        </div>
      </fieldset>
      <fieldset>
        <legend>Effects</legend>
        <div class="row">
          <label for="pti-instrument-overdrive">Overdrive</label>
          <input type="range" id="pti-instrument-overdrive" name="overdrive" min="0" max="100">
          <output name="overdrive-result" for="pti-instrument-overdrive"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-bitDepth">Bit depth</label>
          <input type="range" id="pti-instrument-bitDepth" name="bitDepth" min="1" max="16">
          <output name="bitDepth-result" for="pti-instrument-bitDepth"></output>
        </div>
        <div class="row">
          <label for="pti-instrument-reverbSend">Reverb send</label>
          <input type="range" id="pti-instrument-reverbSend" name="reverbSend" min=" 0" max="100">
          <output name="reverbSend-result" for="pti-instrument-reverbSend"></output>
        </div>
        <div class="row">
          <label for=" pti-instrument-delaySend">Delay send</label>
          <input type="range" id="pti-instrument-delaySend" name="delaySend" min="0" max="100">
          <output name="delaySend-result" for="pti-instrument-delaySend"></output>
        </div>
      </fieldset>
    </form>
  </template>
</body>

</html>
